<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>EdgeX Foundry中国社区</title>
  <link rel="shortcut icon" type="image/x-icon" href="/img/bg_img.png" style="width:62px;height:62px;" />
  <link rel="stylesheet" href="/vendors/bootstrap/css/bootstrap.min.css">
  <link href="/vendors/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/footer.css">
  <style media="screen">
    * {
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
    }
    a {
      color: inherit;
      text-decoration: none!important;
      outline: 0;
    }

    a:visited {
      color: inherit;
      text-decoration: none!important;
      outline: 0;
    }

    .user_profile img {
      width: 51px;
      height: 51px;
      display: inline-block;
      border-radius: 50%;
      border: 1px solid rgba(148, 44, 73, 0.5);
      outline: 0;
    }
    .user_hide_info:hover {
      display: inline-block;
    }

  </style>

  <style media="screen">
  /* myfooter start */
    .myfooter{
      width: 100%;
      margin-top: 10px;
      padding-top: 10px;
      padding-bottom: 10px;
      background: #343a40;
      text-align: center;
    }

    .copyright{
      width: 420px;
      margin: 0 auto;
      color: #ffffff;
    }

    .copyright img{
      width: 120px;
      height: 60px;
    }

    .copyright span{
      font-size: 14px;
    }

    .fixed-footer{
      position: fixed;
      bottom: 0;
    }

    .x-hot-article li{
      
      padding: 3px 0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
  
  </style>
</head>

<body style="background-color:#f4f5f5">
  <div class="header">
    <div class="container">
      <div class="title" style="display:inline-block;">
        <a href="/"><i class="fa fa-home fa-fw"></i>EdgeX Foundry中国社区</a>
      </div>
      <div class="title-l" style="display:inline-block;position: relative;">
        <a href="http://docs.edgexfoundry.org" target="_blank">官方文档</a>
      </div>
      
      <!-- <div class="title-l" style="display:inline-block;">
        <a href="/tutorial/video.html" target="_blank">视频教程</a>
      </div>
      <div class="title-l" style="display:inline-block;">
        <a href="/docs/download.html" target="_blank">资料下载</a>
      </div> -->
      <!-- <div class="title-l" style="display:inline-block;">
        <a href="/market/market.html" target="_blank">Marketplace</a>
      </div> -->
      <div style="display:inline-block;" class="pull-right">
        <div class="header_post">
          <a><span><i class="fa fa-edit fa-fw"></i>发帖</span></a>
        </div>
        <div class="header_user" style="display:none; position:relative!important;">
            <div class="dropdown">
              <img src="" alt="" style="width:22px;height:22px;margin:0;margin-left:5px;padding:0;border-radius:15%;border:1px solid rgb(148, 44, 73, 0.5);">
              <span class="badge" style="display:none;position:relative;left:-10px;top:-10px;background-color:red!important;">99+</span>
            </div>
        </div>
        <div class="header_login" style="margin-left:5px;">
          <a><span>登录</span></a>
        </div>
      </div>
    </div>

  </div>

  <div class="center" id="index_main">
    <div class="container">
      <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12">
          <!-- <div class="welcome">
            <div style="font-size:x-large;font-weight: bold;padding-top:40px;">
              欢迎访问EdgeX Foundry中国社区
            </div>

            <div style="width:800px;margin-top:40px;">国内首个EdgeX Foundry物联网框架的交流社区。EdgeX Foundry是由Dell发起的物联网解决方案，目前EdgeX Foundry属于Linux基金会的首个物联网框架。
            </div>
          </div> -->
          <div class="jumbotron welcome" style="margin-bottom:20px;border-radius:0;">
            <h2>欢迎访问EdgeX Foundry中国社区</h2>

            <p style="font-weight:400;"><small>国内首个EdgeX Foundry物联网框架的交流社区。EdgeX Foundry是由Dell发起的物联网解决方案，目前EdgeX Foundry属于Linux基金会的首个物联网框架。</small></p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-8 col-md-8 col-lg-8">
          <div class="article_main">
            <span><i class="fa fa-yelp fa-fw" style="color:#942c49;"></i>&nbsp;最新动态</span>
          </div>
          <ul class="list-group">

          </ul>
          <div class="article_footer">

          </div>
        </div>
        <div class="col-sm-4 col-md-4 col-lg-4">
            <div class="panel panel-default">
                <div class="panel-heading"> <i class="fa fa-volume-up fa-fw" style="color:#942c49;"></i>&nbsp;网站公告</div>
                <div class="panel-body">
                    <div class="announcement">
                       
                        <p style="color:rgb(148,44,73);"> EdgeX Foundry中国社区，是国内首个EdgeX Foundry物联网框架的交流社区。EdgeX Foundry是由Dell发起的物联网解决方案，目前EdgeX Foundry属于Linux基金会的首个物联网框架。我们致力于为EdgeX Foundry技术人员提供分享和交流的平台，推动EdgeX Foundry在国内的普及和应用。 欢迎CTO、架构师、开发者等，在这里学习与交流使用EdgeX Foundry的实战经验。
                        </p>
            
                      </div>
                </div>
            </div>
          
          <div class="panel panel-default x-hot-article">
            <div class="panel-heading">热门文章</div>
            <div class="panel-body">
                
            </div>
        </div>
        <div class="panel panel-default x-hot-author">
          <div class="panel-heading">热门作者</div>
          <div class="panel-body">
              
          </div>
        </div>
          <div class="wechat_comm">
            <img src="" alt="">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- myfooter start -->
      <footer class="myfooter">
          <div class="copyright">

            <span style="color:gray;">EdgeX Foundry中国社区&nbsp;&nbsp; <a href="http://www.miitbeian.gov.cn/"> © 2018-2019&nbsp; &nbsp; 京ICP备18056168号  </a></span>
            <span><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41162502150039" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;"><img src="/img/ga.png" style="float:left;height:16px;width:16px;"/><p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;">豫公网安备 41162502150039号</p></a></span>

          </div>
      </footer>
  <!-- myfooter end -->


  <script type="text/javascript" src="/vendors/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="/js/util.js"></script>
  <script type="text/javascript" src="/js/main.js"></script>
  <script type="text/javascript">

    function loadHotAuthor(){
      $.ajax({
        url:'/api/v1/hotAuthor',
        type:'GET',
        success:function(data){
          $("div.x-hot-author .panel-body").empty();
          var rowData = '<ul class="list-inline">';
          $.each(data,function(i,e){
              var path = '<a href="/users/'+e.name+'" target="_blank"><img class="media-object img-circle" style="width:51px;height:51px;border: 1px solid rgba(148, 44, 73, 0.5);outline:0;" src="'+e.avatarUrl+'" alt=""></a>';
              rowData += '<li>'+path+'</li>';  
          });
          rowData+='</ul>';
          $("div.x-hot-author .panel-body").append(rowData)
        },
        error:function(){

        }
      });
    }

    function loadHotArticle(){
      $.ajax({
        url:'/api/v1/hotArticle',
        type:'GET',
        success:function(data){
          $("div.x-hot-article .panel-body").empty();
          var rowData = '<ul class="list-unstyled">';
          $.each(data,function(i,e){
                var path = "/articles/users/" + e.userName + "/" + e.id;
                rowData += '<li><a href="'+path+'" class="" target="_blank"><u>'+e.title+'</u></a></li>';  
          });
          rowData+='</ul>';
          $("div.x-hot-article .panel-body").append(rowData)
        },
        error:function(){

        }
      });
    }

     function loadNewArticleList(){
      $.ajax({
        url:'/api/v1/findNewArticles',
        type:'GET',
        success:function(data){
           renderNewArticleList(data);
        },
        error:function(){

        }
      });
    }
    function renderNewArticleList(articles){
      for (var i = 0; i < articles.length; i++){
        var path = "/articles/users/" + articles[i].userName + "/" + articles[i].id;
        // var row = '<div class="article_body">';
        // row += '<div class="user_profile" style="margin-left:10px;padding-top:15px;">';
        // row += '<a href="/users/'+articles[i].userName+'" target="_blank"><img src="'+articles[i].avatarUrl+'" alt=""></a></div>';
        // row += '<div class="article_title">';
        // row += '<a href=\'' + path + '\' target="_blank">' + articles[i].title + '</a>';
        // row += '</div>';
        // row += '<div class="article_intro">';
        // row += '<span style="background-color:rgba(148, 44, 73, 0.5);border-radius:3px;color:white;padding:3px;">' + articles[i].type + '</span>&nbsp;&nbsp;<span class="badge">' + edgexFmtDate(articles[i].created) + '</span>';
        // row += '</div></div>';


        var row = '<li href="" class="list-group-item article_body"><div class="media">';

        row += '<div class="media-left">';
        row += '<a href="/users/'+articles[i].userName+'" target="_blank">';
        row += '<img class="media-object img-circle" style="width:51px;height:51px;border: 1px solid rgba(148, 44, 73, 0.5);outline:0;" src="'+articles[i].avatarUrl+'" alt="">';
        row += '</a>';
        row += '</div>';

        row += '<div class="media-body">';
        row += '<h4 class="media-heading "><a class="" href=\'' + path + '\' target="_blank">'+articles[i].title+'</a></h4>';

        row += '<div class="" >';
        row += '<span class="label label-success">' + articles[i].type + '</span>&nbsp;&nbsp;<span class="badge">' + edgexFmtDate(articles[i].created) + '</span>';
        row += '</div>';

        row += '</div>';
        row += '</div></li>';
        $("#index_main ul[class='list-group']").append(row);
      }
      // $("#index_main div[class='article_body']").on('click',function(){
      //   var article_id = $(this).attr("article_id");
      //   var article_path =  $(this).attr("article_path");
      //   var rowdata =$(this).attr("rowdata");
      //   window.localStorage.setItem("article_info",rowdata);
      //   window.open("http://"+location.hostname + ":8080/articles/article.html","");
      // });
      footerPosition();
      $(window).resize(footerPosition);
    }

    //footer位置设置
    function footerPosition(){
      $("footer").removeClass("fixed-footer");
      var contentHeight = document.body.scrollHeight ,//网页正文全文高度
       winHeight = window.innerHeight || document.body.clientHeight;//可视窗口高度，不包括浏览器顶部工具栏

      if(contentHeight <= winHeight){

          //当网页正文高度小于等于可视窗口高度时，为footer添加类fixed-footer
          $("footer").addClass("fixed-footer");
          // $(".content").height(winHeight);
      } else {

          $("footer").removeClass("fixed-footer");
      }

    }

    $(document).ready(function(){
      loadNewArticleList();
      loadHotAuthor();
      loadHotArticle();
    });
  </script>
</body>

</html>
